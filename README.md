# AI-Sprite

## ğŸ­ é¡¹ç›®ç®€ä»‹

AI-Sprite æ˜¯ä¸€ä¸ªåŸºäºå¤§è¯­è¨€æ¨¡å‹å’Œè¯­éŸ³åˆæˆæŠ€æœ¯çš„æ™ºèƒ½è§’è‰²æ‰®æ¼”ç³»ç»Ÿï¼Œèƒ½å¤Ÿåˆ›å»ºå…·æœ‰ç‹¬ç‰¹ä¸ªæ€§å’Œå£°éŸ³çš„AIè™šæ‹Ÿè§’è‰²ã€‚è¯¥é¡¹ç›®ç»“åˆäº†å…ˆè¿›çš„è‡ªç„¶è¯­è¨€å¤„ç†ã€æƒ…æ„Ÿåˆ†æå’Œè¯­éŸ³å…‹éš†æŠ€æœ¯ï¼Œä¸ºç”¨æˆ·æä¾›æ²‰æµ¸å¼çš„è§’è‰²äº’åŠ¨ä½“éªŒã€‚

### âœ¨ æ ¸å¿ƒç‰¹æ€§

ğŸª **è§’è‰²æ‰®æ¼”ç³»ç»Ÿ**
- æ”¯æŒå¤šç§é¢„è®¾è§’è‰²ï¼ˆçº³è¥¿å¦²ã€æ´¾è’™ã€å¥¥ä¼¦ç­‰åŸç¥è§’è‰²ï¼‰
- æ¯ä¸ªè§’è‰²éƒ½æœ‰ç‹¬ç‰¹çš„æ€§æ ¼è®¾å®šå’Œå¯¹è¯é£æ ¼
- åŸºäºè§’è‰²èƒŒæ™¯çš„ä¸ªæ€§åŒ–å›å¤ç”Ÿæˆ

ğŸ”Š **è¯­éŸ³å…‹éš†æŠ€æœ¯**
- é›†æˆ GPT-SoVITS é«˜è´¨é‡è¯­éŸ³åˆæˆå¼•æ“
- æ”¯æŒè§’è‰²ä¸“å±è¯­éŸ³å…‹éš†ï¼Œè¿˜åŸè§’è‰²ç‹¬ç‰¹éŸ³è‰²
- å®æ—¶æ–‡æœ¬è½¬è¯­éŸ³ï¼Œæä¾›è‡ªç„¶æµç•…çš„è¯­éŸ³è¾“å‡º

ğŸ§  **æ™ºèƒ½å¯¹è¯å¼•æ“**
- åŸºäºå¤§è¯­è¨€æ¨¡å‹çš„è‡ªç„¶å¯¹è¯èƒ½åŠ›
- ä¸Šä¸‹æ–‡æ„ŸçŸ¥ï¼Œæ”¯æŒè¿ç»­å¯¹è¯
- è§’è‰²ä¸€è‡´æ€§ä¿æŒï¼Œç¡®ä¿å¯¹è¯ç¬¦åˆè§’è‰²è®¾å®š

ğŸ˜Š **æƒ…æ„Ÿåˆ†æç³»ç»Ÿ**
- å®æ—¶åˆ†æç”¨æˆ·è¾“å…¥çš„æƒ…æ„ŸçŠ¶æ€
- æ”¯æŒ6ç§æƒ…æ„Ÿè¯†åˆ«ï¼šå¼€å¿ƒã€å®³æ€•ã€ç”Ÿæ°”ã€å¤±è½ã€å¥½å¥‡ã€è°ƒä¾ƒ
- åŸºäºæƒ…æ„ŸçŠ¶æ€è°ƒæ•´è§’è‰²å›å¤é£æ ¼

ğŸ¤ **è¯­éŸ³è¯†åˆ«åŠŸèƒ½**
- å®æ—¶è¯­éŸ³è½¬æ–‡æœ¬
- æ”¯æŒä¸­æ–‡è¯­éŸ³è¯†åˆ«
- æµå¼å¤„ç†ï¼Œä½å»¶è¿Ÿå“åº”

### ğŸ¬ é¡¹ç›®æ¼”ç¤º

#### æ¼”ç¤ºè§†é¢‘

**åŸç¥è§’è‰²æ¼”ç¤ºï¼ˆçº³è¥¿å¦² & æ´¾è’™ï¼‰**

![åŸç¥è§’è‰²æ¼”ç¤º](Demo/demo-yuanshen.mp4)

**å“ªå’è§’è‰²æ¼”ç¤ºï¼ˆæ•–æ¶¦ï¼‰**

![å“ªå’è§’è‰²æ¼”ç¤º](Demo/demo-aurun.mp4)

*æ¼”ç¤ºè§†é¢‘å±•ç¤ºäº†AI-Spriteçš„å®Œæ•´äº¤äº’æµç¨‹ï¼šè¯­éŸ³è¾“å…¥ â†’ è¯­éŸ³è¯†åˆ« â†’ æƒ…æ„Ÿåˆ†æ â†’ è§’è‰²å¯¹è¯ç”Ÿæˆ â†’ è¯­éŸ³åˆæˆè¾“å‡º*

### ğŸ—ï¸ æŠ€æœ¯æ¶æ„

- **ASRæ¨¡å—**: åŸºäº Paraformer çš„è‡ªåŠ¨è¯­éŸ³è¯†åˆ«
- **LLMæ¨¡å—**: å¤§è¯­è¨€æ¨¡å‹é©±åŠ¨çš„å¯¹è¯ç”Ÿæˆ
- **TTSæ¨¡å—**: GPT-SoVITS è¯­éŸ³åˆæˆå¼•æ“
- **æƒ…æ„Ÿå¼•æ“**: åŸºäºBERTçš„æƒ…æ„Ÿåˆ†ææ¨¡å‹
- **WebSocketæœåŠ¡**: å®æ—¶é€šä¿¡æ”¯æŒ

---

Use LLM and TTS to make your own AI Sprites.

## å®‰è£…å’Œè¿è¡ŒæŒ‡å—

### ç¯å¢ƒè¦æ±‚
- Python 3.10+
- macOS (æ¨è) æˆ–å…¶ä»–æ”¯æŒçš„æ“ä½œç³»ç»Ÿ

### å®‰è£…æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**
   ```bash
   git clone <repository-url>
   cd AI-Sprite
   ```

2. **åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ**
   ```bash
   python3 -m venv venv
   source venv/bin/activate  # macOS/Linux
   # æˆ–è€…åœ¨Windowsä¸Š: venv\Scripts\activate
   ```

3. **å‡çº§pip**
   ```bash
   pip install --upgrade pip
   ```

4. **å®‰è£…ä¾èµ–åŒ…**
   ```bash
   pip install -r requirements.txt
   ```

   å¦‚æœé‡åˆ°SSLé”™è¯¯ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š
   ```bash
   pip install --trusted-host pypi.org --trusted-host pypi.python.org --trusted-host files.pythonhosted.org -r requirements.txt
   ```

5. **å®‰è£…ç³»ç»Ÿä¾èµ–**
   
   **macOS:**
   ```bash
   brew install portaudio
   ```
   
   **Amazon Linux / CentOS / RHEL:**
   ```bash
   # æ›´æ–°ç³»ç»ŸåŒ…
   sudo yum update -y
   
   # å®‰è£…å¼€å‘å·¥å…·å’Œä¾èµ–
   sudo yum groupinstall -y "Development Tools"
   sudo yum install -y python3 python3-pip python3-devel
   
   # å®‰è£…éŸ³é¢‘å¤„ç†ä¾èµ–
   sudo yum install -y portaudio-devel alsa-lib-devel
   
   # å®‰è£…å…¶ä»–ç³»ç»Ÿä¾èµ–
   sudo yum install -y gcc gcc-c++ make cmake
   sudo yum install -y libffi-devel openssl-devel
   ```
   
   **Ubuntu/Debian:**
   ```bash
   sudo apt-get update
   sudo apt-get install -y python3 python3-pip python3-venv python3-dev
   sudo apt-get install -y portaudio19-dev libasound2-dev
   sudo apt-get install -y build-essential cmake
   sudo apt-get install -y libffi-dev libssl-dev
   ```

### Amazon Linux å®Œæ•´å®‰è£…ç¤ºä¾‹

å¦‚æœä½ åœ¨Amazon Linuxä¸Šè¿è¡Œï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å®Œæ•´çš„å®‰è£…è„šæœ¬ï¼š

```bash
# 1. æ›´æ–°ç³»ç»Ÿå¹¶å®‰è£…åŸºç¡€ä¾èµ–
sudo yum update -y
sudo yum groupinstall -y "Development Tools"
sudo yum install -y python3 python3-pip python3-devel
sudo yum install -y portaudio-devel alsa-lib-devel
sudo yum install -y gcc gcc-c++ make cmake
sudo yum install -y libffi-devel openssl-devel

# 2. å…‹éš†é¡¹ç›®
git clone <repository-url>
cd AI-Sprite

# 3. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python3 -m venv venv
source venv/bin/activate

# 4. å‡çº§pip
pip install --upgrade pip

# 5. å®‰è£…Pythonä¾èµ–
pip install --trusted-host pypi.org --trusted-host pypi.python.org --trusted-host files.pythonhosted.org -r requirements.txt

# å¦‚æœç½‘ç»œè¾ƒæ…¢ï¼Œå¯ä»¥åˆ†æ­¥å®‰è£…æ ¸å¿ƒä¾èµ–
# pip install --trusted-host pypi.org --trusted-host pypi.python.org --trusted-host files.pythonhosted.org numpy scipy librosa
# pip install --trusted-host pypi.org --trusted-host pypi.python.org --trusted-host files.pythonhosted.org transformers torch onnxruntime

# 6. è¿è¡Œé¡¹ç›®
cd Server
python run_script.py
```

### è¿è¡Œé¡¹ç›®

1. **æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ**
   ```bash
   source venv/bin/activate
   ```

2. **è¿è¡ŒæœåŠ¡å™¨**
   ```bash
   cd Server
   python run_script.py
   ```

   æˆ–è€…ç›´æ¥è¿è¡Œï¼š
   ```bash
   cd Server
   python SocketServer.py --stream False --character aorun
   ```

## GPT-SoVITS å®‰è£…å’Œé…ç½®

### GPT-SoVITS ç®€ä»‹
GPT-SoVITS æ˜¯æœ¬é¡¹ç›®ä½¿ç”¨çš„æ–‡æœ¬è½¬è¯­éŸ³(TTS)å¼•æ“ï¼Œæä¾›é«˜è´¨é‡çš„è¯­éŸ³åˆæˆåŠŸèƒ½ã€‚

### å®‰è£…æ–¹æ³•
è¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£è¿›è¡Œå®‰è£…ï¼š
**[GPT-SoVITS fast_inference åˆ†æ”¯](https://github.com/RVC-Boss/GPT-SoVITS/tree/fast_inference_)**

âš ï¸ **é‡è¦æé†’**ï¼šè¯·åŠ¡å¿…ä½¿ç”¨ `fast_inference_` åˆ†æ”¯ï¼Œåªæœ‰è¿™ä¸ªåˆ†æ”¯æ‰åŒ…å«æœ¬é¡¹ç›®æ‰€éœ€çš„ `api_v3` æ¥å£ã€‚

### éƒ¨ç½²å»ºè®®

#### æ–¹æ¡ˆ1ï¼šåŒæœåŠ¡å™¨éƒ¨ç½²ï¼ˆé€‚åˆæµ‹è¯•ï¼‰
- GPT-SoVITS å’Œ AI-Sprite ä¸»æœåŠ¡å™¨éƒ¨ç½²åœ¨åŒä¸€å°æœºå™¨ä¸Š
- ä¼˜ç‚¹ï¼šé…ç½®ç®€å•ï¼ŒéŸ³é¢‘ä¼ è¾“é€Ÿåº¦å¿«
- ç¼ºç‚¹ï¼šèµ„æºç«äº‰ï¼Œæ€§èƒ½å¯èƒ½å—å½±å“

#### æ–¹æ¡ˆ2ï¼šç‹¬ç«‹æœåŠ¡å™¨éƒ¨ç½²ï¼ˆæ¨èç”Ÿäº§ç¯å¢ƒï¼‰
- GPT-SoVITS éƒ¨ç½²åœ¨ç‹¬ç«‹çš„æœåŠ¡å™¨ä¸Š
- å»ºè®®é€šè¿‡å†…ç½‘è¿æ¥ï¼Œç¡®ä¿éŸ³é¢‘ä¼ è¾“é€Ÿç‡
- ä¼˜ç‚¹ï¼šæ€§èƒ½æ›´å¥½ï¼Œèµ„æºéš”ç¦»
- ç¼ºç‚¹ï¼šéœ€è¦é¢å¤–çš„æœåŠ¡å™¨èµ„æº

### é…ç½®è¿æ¥åœ°å€

åœ¨ä½ çš„é…ç½®ä¸­è®¾ç½® GPT-SoVITS æœåŠ¡åœ°å€ï¼š

```python
# ç¤ºä¾‹é…ç½®
server_url = 'http://10.0.29.129:9880/tts'
```

**åœ°å€é…ç½®è¯´æ˜**ï¼š
- **æœ¬æœºéƒ¨ç½²**ï¼š`http://localhost:9880/tts` æˆ– `http://127.0.0.1:9880/tts`
- **å†…ç½‘éƒ¨ç½²**ï¼š`http://å†…ç½‘IP:9880/tts`ï¼ˆå¦‚ç¤ºä¾‹ä¸­çš„ `http://10.0.29.129:9880/tts`ï¼‰
- **å…¬ç½‘éƒ¨ç½²**ï¼š`http://å…¬ç½‘IP:9880/tts`ï¼ˆä¸æ¨èï¼Œå®‰å…¨æ€§å’Œé€Ÿåº¦éƒ½ä¸ç†æƒ³ï¼‰

ğŸ’¡ **é…ç½®å‚è€ƒ**ï¼šå¯ä»¥æŸ¥çœ‹ `Server/config_example.py` æ–‡ä»¶äº†è§£è¯¦ç»†çš„é…ç½®é€‰é¡¹ã€‚

### æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **ç½‘ç»œä¼˜åŒ–**ï¼š
   - ä¼˜å…ˆä½¿ç”¨å†…ç½‘è¿æ¥
   - ç¡®ä¿ç½‘ç»œå¸¦å®½å……è¶³
   - é¿å…è·¨åœ°åŸŸéƒ¨ç½²

2. **æœåŠ¡å™¨é…ç½®**ï¼š
   - GPT-SoVITS å»ºè®®ä½¿ç”¨GPUåŠ é€Ÿ
   - ç¡®ä¿æœ‰è¶³å¤Ÿçš„å†…å­˜å’Œå­˜å‚¨ç©ºé—´
   - ç›‘æ§æœåŠ¡çŠ¶æ€å’Œæ€§èƒ½æŒ‡æ ‡

### é¡¹ç›®ç»“æ„
```
AI-Sprite/
â”œâ”€â”€ Server/           # æœåŠ¡å™¨ç«¯ä»£ç 
â”‚   â”œâ”€â”€ ASR/         # è‡ªåŠ¨è¯­éŸ³è¯†åˆ«æ¨¡å—
â”‚   â”œâ”€â”€ LLM/         # å¤§è¯­è¨€æ¨¡å‹æ¨¡å—
â”‚   â”œâ”€â”€ TTS/         # æ–‡æœ¬è½¬è¯­éŸ³æ¨¡å—
â”‚   â”œâ”€â”€ SentimentEngine/  # æƒ…æ„Ÿåˆ†æå¼•æ“
â”‚   â”‚   â”œâ”€â”€ SentimentEngine.py  # æƒ…æ„Ÿåˆ†æä¸»ç±»
â”‚   â”‚   â””â”€â”€ models/             # ONNXæ¨¡å‹æ–‡ä»¶
â”‚   â”œâ”€â”€ utils/       # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ SocketServer.py   # ä¸»æœåŠ¡å™¨æ–‡ä»¶
â”‚   â””â”€â”€ run_script.py     # å¯åŠ¨è„šæœ¬
â”œâ”€â”€ Web/             # å‰ç«¯ä»£ç 
â””â”€â”€ requirements.txt # Pythonä¾èµ–åŒ…åˆ—è¡¨
```

### åŠŸèƒ½æ¨¡å—è¯´æ˜

- **ASR (è‡ªåŠ¨è¯­éŸ³è¯†åˆ«)**ï¼šå°†è¯­éŸ³è½¬æ¢ä¸ºæ–‡æœ¬
- **LLM (å¤§è¯­è¨€æ¨¡å‹)**ï¼šå¤„ç†è‡ªç„¶è¯­è¨€å¯¹è¯
- **TTS (æ–‡æœ¬è½¬è¯­éŸ³)**ï¼šå°†æ–‡æœ¬è½¬æ¢ä¸ºè¯­éŸ³
- **SentimentEngine (æƒ…æ„Ÿåˆ†æ)**ï¼šåˆ†ææ–‡æœ¬æƒ…æ„Ÿï¼Œæ”¯æŒ6ç§æƒ…æ„Ÿç±»å‹ï¼š
  - 0: å¼€å¿ƒ
  - 1: å®³æ€•  
  - 2: ç”Ÿæ°”
  - 3: å¤±è½
  - 4: å¥½å¥‡
  - 5: è°ƒä¾ƒ

### æ•…éšœæ’é™¤

1. **SSLè¯ä¹¦é”™è¯¯**
   - ä½¿ç”¨ `--trusted-host` å‚æ•°å®‰è£…åŒ…
   - æˆ–è€…æ›´æ–°è¯ä¹¦ï¼š`pip install --upgrade certifi`

2. **ç¼ºå°‘ç³»ç»Ÿä¾èµ–**
   - macOS: `brew install portaudio`
   - Amazon Linux: `sudo yum install -y portaudio-devel alsa-lib-devel`
   - Ubuntu: `sudo apt-get install portaudio19-dev`

3. **Pythonç‰ˆæœ¬é—®é¢˜**
   - ç¡®ä¿ä½¿ç”¨Python 3.10æˆ–æ›´é«˜ç‰ˆæœ¬
   - ä½¿ç”¨ `python3` è€Œä¸æ˜¯ `python` å‘½ä»¤
   - Amazon Linuxä¸Šå¯èƒ½éœ€è¦å®‰è£…æ›´æ–°çš„Pythonç‰ˆæœ¬ï¼š
     ```bash
     sudo yum install -y python3.10 python3.10-pip python3.10-devel
     ```

4. **ç¼–è¯‘é”™è¯¯ (Amazon Linux)**
   - ç¡®ä¿å®‰è£…äº†å¼€å‘å·¥å…·ï¼š
     ```bash
     sudo yum groupinstall -y "Development Tools"
     sudo yum install -y gcc gcc-c++ make cmake
     ```
   - å¦‚æœé‡åˆ°LLVMç›¸å…³é”™è¯¯ï¼Œå¯èƒ½éœ€è¦å®‰è£…ç‰¹å®šç‰ˆæœ¬çš„LLVMï¼š
     ```bash
     sudo yum install -y llvm-devel
     ```

5. **éŸ³é¢‘è®¾å¤‡é—®é¢˜**
   - åœ¨æ— å¤´æœåŠ¡å™¨ç¯å¢ƒä¸­ï¼Œå¯èƒ½éœ€è¦é…ç½®è™šæ‹ŸéŸ³é¢‘è®¾å¤‡
   - Amazon Linuxä¸Šå¯ä»¥å®‰è£…pulseaudioï¼š
     ```bash
     sudo yum install -y pulseaudio pulseaudio-utils
     ```

6. **æƒé™é—®é¢˜**
   - ç¡®ä¿ç”¨æˆ·æœ‰æƒé™è®¿é—®éŸ³é¢‘è®¾å¤‡
   - å¯èƒ½éœ€è¦å°†ç”¨æˆ·æ·»åŠ åˆ°audioç»„ï¼š
     ```bash
     sudo usermod -a -G audio $USER
     ```

7. **æƒ…æ„Ÿåˆ†ææ¨¡å—é—®é¢˜**
   - å¦‚æœé‡åˆ° `transformers` ç›¸å…³é”™è¯¯ï¼Œç¡®ä¿å®‰è£…äº†æ­£ç¡®ç‰ˆæœ¬ï¼š
     ```bash
     pip install transformers>=4.20.0 torch>=1.9.0
     ```
   - é¦–æ¬¡è¿è¡Œæ—¶ä¼šè‡ªåŠ¨ä¸‹è½½BERTæ¨¡å‹ï¼Œéœ€è¦ç½‘ç»œè¿æ¥
   - å¦‚æœä¸‹è½½å¤±è´¥ï¼Œå¯ä»¥æ‰‹åŠ¨è®¾ç½®é•œåƒï¼š
     ```bash
     export HF_ENDPOINT=https://hf-mirror.com
     ```

8. **æµ‹è¯•å„ä¸ªæ¨¡å—**
   - æµ‹è¯•æƒ…æ„Ÿåˆ†ææ¨¡å—ï¼š
     ```bash
     cd Server
     python test_sentiment.py
     ```

### é…ç½®è¯´æ˜

#### ä½¿ç”¨ run_script.py (æ¨è)

`run_script.py` æ˜¯ä¸€ä¸ªé…ç½®è„šæœ¬ï¼Œè®©ä½ å¯ä»¥åœ¨ä¸€ä¸ªåœ°æ–¹è®¾ç½®æ‰€æœ‰å‚æ•°ï¼Œç„¶åç›´æ¥è¿è¡Œï¼š

1. **ç¼–è¾‘é…ç½®**ï¼šæ‰“å¼€ `Server/run_script.py`ï¼Œä¿®æ”¹é…ç½®åŒºåŸŸçš„å‚æ•°ï¼š
   ```python
   # åŸºæœ¬é…ç½®
   STREAM = "False"          # æ˜¯å¦å¯ç”¨æµå¼å¤„ç†: True/False
   CHARACTER = "aorun"       # è§’è‰²åç§°
   
   # å¯é€‰é…ç½®
   PROXY = None              # ä»£ç†è®¾ç½®
   IP = None                 # IPåœ°å€
   BRAINWASH = None          # æ˜¯å¦å¯ç”¨brainwash: True/False
   ```

2. **è¿è¡ŒæœåŠ¡å™¨**ï¼š
   ```bash
   cd Server
   python run_script.py
   ```

#### ç›´æ¥è¿è¡Œ SocketServer.py

å¦‚æœä½ æƒ³ç›´æ¥è¿è¡Œä¸»æœåŠ¡å™¨æ–‡ä»¶ï¼Œéœ€è¦æ‰‹åŠ¨æŒ‡å®šå‚æ•°ï¼š

```bash
python SocketServer.py --stream False --character aorun
```

æ”¯æŒçš„å‚æ•°ï¼š
- `--stream`: æ˜¯å¦å¯ç”¨æµå¼å¤„ç† (True/False) - **å¿…éœ€**
- `--character`: è§’è‰²åç§° - **å¿…éœ€**
- `--proxy`: ä»£ç†è®¾ç½® - å¯é€‰
- `--ip`: IPåœ°å€ - å¯é€‰
- `--brainwash`: æ˜¯å¦å¯ç”¨brainwash (True/False) - å¯é€‰

ç¤ºä¾‹ï¼š
```bash
python SocketServer.py --stream True --character custom_character --ip 192.168.1.100
```
